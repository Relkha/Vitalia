{% load static %}
<header>
  <div class="logo">Vitalia</div>
  <nav>
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/a_propos">À propos</a></li>
      <li><a href="#">Nos services</a></li>
      <li><a href="/contact">Contact</a></li>
      <li><a href="{% url 'dossiers_medical' %}" class="active">Soins</a></li>

      {% if user.is_authenticated and user.is_superuser or user.groups.first.name == "Directeur" or user.groups.first.name == "Responsable du site" %}
      <li><a href="/admin">Admin</a></li>
      {% endif %}
      {% if user.is_authenticated and user.groups.first.name != "Visiteur du site" %}
      <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
      {% endif %}
      {% if user.is_authenticated %}
      <li><a href="{% url 'deconnexion' %}">Déconnexion</a></li>
      {% else %}
      <li><a href="{% url 'connexion' %}">Connexion</a></li>
      {% endif %}
    </ul>
  </nav>
</header>

<link rel="stylesheet" href="{% static 'vitalia_app/css/mon_profil.css' %}">

<div class="profil-container">
  <h1>👤 Mon profil</h1>

  <div class="profil-info">
    <p><strong>Nom d'utilisateur :</strong> {{ user.username }}</p>
    <p><strong>Email :</strong> {{ user.email }}</p>
    <p><strong>Rôle :</strong> {{ user.profil.get_role }}</p>
    <p><strong>Niveau :</strong> {{ user.profil.niveau }}</p>
    <p><strong>Points :</strong> {{ user.profil.points }}</p>

    {% if user.profil.photo %}
      <img src="{{ user.profil.photo.url }}" alt="Photo de profil">
    {% else %}
      <p><em>Aucune photo de profil</em></p>
    {% endif %}
  </div>

  <!-- 🔐 Bouton changement de mot de passe -->
  <div style="margin-top: 2rem;">
    <a href="{% url 'change_password' %}" class="btn-password-change">🔒 Modifier mon mot de passe</a>
  </div>

  <hr>

  <div class="profil-form">
    <h2>🖼️ Modifier ma photo</h2>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">💾 Enregistrer</button>
    </form>
  </div>

  {% if messages %}
    <div class="success-message">
      {% for message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
</div>
